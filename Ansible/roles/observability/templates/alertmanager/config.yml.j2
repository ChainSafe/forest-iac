
global:
  slack_api_url: "{{ slack_api_url }}"

route:
  group_by: ['instance', 'severity']
  group_wait: 30s
  group_interval: 5m
  repeat_interval: 3h
  routes:
  - match: 
      severity: warning
    receiver: 'warning-notifications'  
  - match:
      severity: critical
    receiver: 'critical-notifications'
  - match:
      alertname: InstanceDown
  receiver: 'alert-team'

receivers:
- name: 'alert-team'
  slack_configs:
  - channel: "#{{ slack_channel }}"
    text: "summary: {{ '{{' }} .CommonAnnotations.summary {{ '}}' }}\ndescription: {{ '{{' }} .CommonAnnotations.description {{ '}}' }}"
- name: 'critical-notifications'
  slack_configs:
  - channel: "#{{ slack_channel }}"
    text: "Critical alert: {{ '{{' }} .CommonAnnotations.summary {{ '}}' }}: {{ '{{' }} .CommonAnnotations.description {{ '}}' }}"   
- name: 'warning-notifications'
  slack_configs:
  - channel: "#{{ slack_channel }}"
    text: "Warning alert: {{ '{{' }} .CommonAnnotations.summary {{ '}}' }}: {{ '{{' }} .CommonAnnotations.description {{ '}}' }}"